<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lithe.rs - Full Test</title>
    <script type="module">
                window.Lithe = {
                    dispatch: (name) => {
                        if (!window.wasm_module) {
                            console.warn('WASM module not initialized');
                            return;
                        }
                        // Try exact match first
                        if (window.wasm_module[name]) {
                            window.wasm_module[name]();
                            return;
                        }
                        // Try to find a function ending with the name (for local functions)
                        const suffix = '_' + name;
                        for (const key of Object.keys(window.wasm_module)) {
                            if (key.endsWith(suffix) || key === name) {
                                window.wasm_module[key]();
                                return;
                            }
                        }
                        console.warn('WASM function not found:', name);
                    }
                };
                import init, * as exports from '/public/pkg/rust.js';
                init().then(() => {
                    window.wasm_module = exports;
                });
            </script>
</head>
<body>
    <div class="container"><h1>Welcome to Lithe.rs</h1><p>1. Inline closure (Svelte-like):</p><button onclick="Lithe.dispatch('page_anon_1')">Click Me (Inline)</button><p>2. Local function in same file:</p><button onclick="Lithe.dispatch('handle_local_click')">Click Me (Local)</button><p>3. Imported function from utils.rs:</p><button onclick="Lithe.dispatch('utils_alert_from_utils')">Click Me (Imported)</button><div style="margin-top: 20px;"><a href="/about">Go to About</a></div></div>
</body>
</html>